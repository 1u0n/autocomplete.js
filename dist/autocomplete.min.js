var AutoComplete=function(){"use strict";function a(a,b){d(b,{"class":"autocomplete",style:"top:"+(a.offsetTop+a.offsetHeight)+"px;left:"+a.offsetLeft+"px;width:"+a.clientWidth+"px;"})}function b(a,b,c,d,e){a&&a.abort();var f=b.method,g=b.url;return f.match(/^GET$/i)&&(g+="?"+c),a=new XMLHttpRequest,a.open(f,g,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&b.post(e,a.response,b)!==!0&&b.open(d,e)},a.send(c),a}function c(a,b){b?e(a,"autocomplete"):setTimeout(function(){c(a,!0)},150)}function d(a,b,c){if(null!==a){if("string"==typeof b)return a.hasAttribute(b)?a.getAttribute(b):c;for(var d in b)a.setAttribute(d,b[d])}}function e(a,b){if(null!==a){if(void 0===b)return d(a,"class");d(a,{"class":b})}}function f(a){return document.createElement(a)}function g(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}var h=function(i){if(this){var j,k=this,l={limit:0,method:"GET",noResult:"No result",paramName:"q",select:function(a,b){d(a,{"data-autocomplete-old-value":a.value=d(b,"data-autocomplete-value",b.innerHTML)})},open:function(a,b){var c=this;Array.prototype.forEach.call(b.getElementsByTagName("li"),function(b){b.onclick=function(b){c.select(a,b.target)}})},post:function(a,b,c){try{b=JSON.parse(b);var g,h,i,j,k=function(){return f("li")},l=function(a,b){return 0>b?a.reverse():a},m=function(a,b,c){return b.innerHTML=c,a.appendChild(b),k()},n=0,o=b.length,p=k(),q=f("ul"),r=c.limit;if(Array.isArray(b))if(o)for(b=l(b,r);o>n&&(n<Math.abs(r)||!r);n++)p=m(q,p,b[n]);else g=!0,e(p,"locked"),p=m(q,p,c.noResult);else{i=l(Object.getOwnPropertyNames(b),r);for(h in i)j=i[h],(parseInt(h)<Math.abs(r)||!r)&&(d(p,{"data-autocomplete-value":j}),p=m(q,p,b[j]))}return a.hasChildNodes()&&a.childNodes[0].remove(),a.appendChild(q),g}catch(s){a.innerHTML=b}},pre:function(a){return a.value},selector:["input[data-autocomplete]"]};k._custArgs=[],k._args=g(l,i||{}),k._args.method.match(/^GET|POST$/i)||(k._args.method=l.method),j=k._args.selector,Array.isArray(j)||(j=[j]),j.forEach(function(g){Array.prototype.forEach.call(document.querySelectorAll(g),function(g){if(g.nodeName.match(/^INPUT$/i)&&g.type.match(/^TEXT|SEARCH$/i)){var h,i="data-autocomplete-old-value",j=f("div");d(g,{autocomplete:"off"}),a(g,j),g.addEventListener("position",function(){a(g,j)}),g.parentNode.appendChild(j),g.onfocus=function(){var a=d(g,i);a&&g.value==a||e(j,"autocomplete open")},g.onblur=function(){c(j)},g.onkeyup=function(a){var c,f=a.keyCode,g=a.target;if(13==f&&-1!=e(j).indexOf("open")&&(c=j.querySelector("li.active"),null!==c&&(k._args.select(g,c),e(j,"autocomplete"))),38==f||40==f)if(c=j.querySelector("li.active"),null===c){var l=j.querySelector("li:first-child:not(.locked)");null!==l&&e(l,"active")}else{var m=Array.prototype.indexOf.call(c.parentNode.children,c);e(c,"");var n=m+(f-39),o=j.getElementsByTagName("li").length;0>n?n=o-1:n>=o&&(n=0),e(c.parentElement.childNodes.item(n),"active")}else if(35>f||f>40){var p=k.CustParams(g),q=p.pre(g);if(q&&p.url){var r=d(g,i);r&&q==r||e(j,"autocomplete open"),h=b(h,p,p.paramName+"="+q,g,j)}}}}})})}else new h(i)};return h.prototype={CustParams:function(a){var b="data-autocomplete-id",c=this;if(!a.hasAttribute(b)){a.setAttribute(b,c._custArgs.length);for(var e={limit:"data-autocomplete-limit",method:"data-autocomplete-method",noResult:"data-autocomplete-no-result",paramName:"data-autocomplete-param-name",url:"data-autocomplete"},f=Object.getOwnPropertyNames(e),h=f.length-1;h>=0;h--)e[f[h]]=d(a,e[f[h]]);for(var i in e)e.hasOwnProperty(i)&&!e[i]&&delete e[i];e.method&&!e.method.match(/^GET|POST$/i)&&delete e.method,e.limit&&(isNaN(e.limit)?delete e.limit:e.limit=parseInt(e.limit)),c._custArgs.push(g(this._args,e))}return c._custArgs[d(a,b)]}},h}();
//# sourceMappingURL=autocomplete.min.js.map