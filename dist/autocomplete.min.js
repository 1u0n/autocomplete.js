var AutoComplete=function(){"use strict";function a(a,b){d(b,{"class":"autocomplete",style:"top:"+(a.offsetTop+a.offsetHeight)+"px;left:"+a.offsetLeft+"px;width:"+a.clientWidth+"px;"})}function b(a,b,c,d,e){a&&a.abort();var f=b.method,g=b.url;return f.match(/^GET$/i)&&(g+="?"+c),a=new XMLHttpRequest,a.open(f,g,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&b.post(e,a.response,b)!==!0&&b.open(d,e)},a.send(c),a}function c(a,b){b?e(a,"autocomplete"):setTimeout(function(){c(a,!0)},150)}function d(a,b){if(null!==a){if("string"==typeof b)return a.getAttribute(b);for(var c in b)a.setAttribute(c,b[c])}}function e(a,b){if(null!==a){if(void 0===typeof b)return d(a,"class");d(a,{"class":b})}}function f(a){return document.createElement(a)}function g(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}var h=function(a){if(this){this._args=a,this._custArgs=[],this.Init();for(var b=this._args.selector.length-1;b>=0;b--)this.BindCollection(this,this._args.selector[b])}else new h(a)};return h.prototype={BindCollection:function(a,b){var c,d,e=document.querySelectorAll(b);for(c=e.length-1;c>=0;c--)d=e[c],d.nodeName.match(/^INPUT$/i)&&d.type.match(/^TEXT|SEARCH$/i)&&this.BindOne(a,d)},BindOne:function(g,h){if(h){var i,j="data-autocomplete-old-value",k=this,l=f("div"),m=h.addEventListener;d(h,{autocomplete:"off"}),a(h,l),m("position",function(){a(h,l)}),h.parentNode.appendChild(l),m("focus",function(){var a=d(h,j);a&&h.value==a||e(l,"autocomplete open")}),m("blur",function(){c(l)}),m("keyup",function(a){var c,f=a.keyCode,h=a.target;if(13==f&&-1!=e(l).indexOf("open")&&(c=l.querySelector("li.active"),null!==c&&(g._args.select(h,c),e(l,"autocomplete"))),38==f||40==f)if(c=l.querySelector("li.active"),null===c){var m=l.querySelector("li:first-child:not(.locked)");null!==m&&e(m,"active")}else{var n=Array.prototype.indexOf.call(c.parentNode.children,c);e(c,"");var o=n+(f-39),p=l.getElementsByTagName("li").length;0>o?o=p-1:o>=p&&(o=0),e(c.parentElement.childNodes.item(o),"active")}else if(35>f||f>40){var q=k.CustParams(h),r=q.pre(h);if(r&&q.url){var s=d(h,j);s&&r==s||e(l,"autocomplete open"),i=b(i,q,q.paramName+"="+r,h,l)}}})}},CreateCustParams:function(a){for(var b={limit:"data-autocomplete-limit",method:"data-autocomplete-method",noResult:"data-autocomplete-no-result",paramName:"data-autocomplete-param-name",url:"data-autocomplete"},c=Object.getOwnPropertyNames(b),e=c.length-1;e>=0;e--)b[c[e]]=d(a,b[c[e]]);for(var f in b)b.hasOwnProperty(f)&&!b[f]&&delete b[f];return b.method&&!b.method.match(/^GET|POST$/i)&&delete b.method,b.limit&&(isNaN(b.limit)?delete b.limit:b.limit=parseInt(b.limit)),g(this._args,b)},CustParams:function(a){var b="data-autocomplete-id",c=this;return a.hasAttribute(b)||(a.setAttribute(b,c._custArgs.length),c._custArgs.push(c.CreateCustParams(a))),c._custArgs[d(a,b)]},Init:function(){var a=this,b={limit:0,method:"GET",noResult:"No result",paramName:"q",select:function(a,b){var c="data-autocomplete-value";a.value=b.hasAttribute(c)?d(b,c):b.innerHTML,d(a,{"data-autocomplete-old-value":a.value})},open:function(a,b){for(var c=function(b,c){c.addEventListener("click",function(c){b.select(a,c.target)})},d=b.getElementsByTagName("li"),e=d.length-1;e>=0;e--)c(this,d[e])},post:function(a,b,c){try{b=JSON.parse(b);var g,h=b.length,i=f("li"),j=f("ul");if(Array.isArray(b))if(h){c.limit<0&&b.reverse();for(var k=0;h>k&&(k<Math.abs(c.limit)||!c.limit);k++)i.innerHTML=b[k],j.appendChild(i),i=f("li")}else g=!0,e(i,"locked"),i.innerHTML=c.noResult,j.appendChild(i);else{var l=Object.getOwnPropertyNames(b);c.limit<0&&l.reverse();for(var m in l)(parseInt(m)<Math.abs(c.limit)||!c.limit)&&(i.innerHTML=b[l[m]],d(i,{"data-autocomplete-value":l[m]}),j.appendChild(i),i=f("li"))}return a.hasChildNodes()&&a.childNodes[0].remove(),a.appendChild(j),g}catch(n){a.innerHTML=b}},pre:function(a){return a.value},selector:["input[data-autocomplete]"]};void 0===a._args&&(a._args={}),a._args=g(b,a._args),a._args.method.match(/^GET|POST$/i)||(a._args.method=b.method),Array.isArray(a._args.selector)||(a._args.selector=b.selector)}},h}();
//# sourceMappingURL=autocomplete.min.js.map