function attr(a,b,c){if(a)try{for(var d in b)a.setAttribute(d,b[d])}catch(e){return a.hasAttribute(b)?a.getAttribute(b):c}}function attrClass(a,b){return a?attr(a,b?{"class":b}:"class"):void 0}function domCreate(a){return document.createElement(a)}var AutoComplete=function(){"use strict";function a(a,b,c,d,e){a&&a.abort();var f=b.method,g=b.url;return f.match(/^GET$/i)&&(g+="?"+c),a=new XMLHttpRequest,a.open(f,g,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(b.post(e,a.response,b)||b.open(d,e))},a.send(c),a}function b(a,c){c?attrClass(a,"autocomplete"):setTimeout(function(){b(a,!0)},150)}function c(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d}var d=function(e){if(this){var f,g=this,h={limit:0,method:"GET",noResult:"No result",paramName:"q",select:function(a,b){attr(a,{"data-autocomplete-old-value":a.value=attr(b,"data-autocomplete-value",b.innerHTML)})},open:function(a,b){var c=this;Array.prototype.forEach.call(b.getElementsByTagName("li"),function(b){b.onclick=function(b){c.select(a,b.target)}})},post:function(a,b,c){try{b=JSON.parse(b);var d,e,f,g,h=function(){return domCreate("li")},i=function(a,b){return 0>b?a.reverse():a},j=function(a,b,c){return b.innerHTML=c,a.appendChild(b),h()},k=0,l=b.length,m=h(),n=domCreate("ul"),o=c.limit;if(Array.isArray(b))if(l)for(b=i(b,o);l>k&&(k<Math.abs(o)||!o);k++)m=j(n,m,b[k]);else d=!0,attrClass(m,"locked"),m=j(n,m,c.noResult);else{f=i(Object.getOwnPropertyNames(b),o);for(e in f)g=f[e],(parseInt(e)<Math.abs(o)||!o)&&(attr(m,{"data-autocomplete-value":g}),m=j(n,m,b[g]))}return a.hasChildNodes()&&a.childNodes[0].remove(),a.appendChild(n),d}catch(p){a.innerHTML=b}},pre:function(a){return a.value},selector:["input[data-autocomplete]"]};g._custArgs=[],g._args=c(h,e||{}),f=g._args.selector,Array.isArray(f)||(f=[f]),f.forEach(function(c){Array.prototype.forEach.call(document.querySelectorAll(c),function(c){if(c.nodeName.match(/^INPUT$/i)&&c.type.match(/^TEXT|SEARCH$/i)){var d,e="data-autocomplete-old-value",f=domCreate("div"),h=function(){attr(f,{"class":"autocomplete",style:"top:"+(c.offsetTop+c.offsetHeight)+"px;left:"+c.offsetLeft+"px;width:"+c.clientWidth+"px;"})},i=function(){c.onfocus=c.onblur=c.onkeyup=null,c.removeEventListener("position",h),c.removeEventListener("destroy",i),f.parentNode.removeChild(f),g.CustParams(c,!0)},j=function(){var a=attr(c,e);a&&c.value==a||attrClass(f,"autocomplete open")};attr(c,{autocomplete:"off"}),h(c,f),c.addEventListener("position",h),c.addEventListener("destroy",i),c.parentNode.appendChild(f),c.onfocus=j,c.onblur=b.bind(null,f),c.onkeyup=function(b){var c,h,i,j,k=f.querySelector("li:first-child:not(.locked)"),l=b.target,m=g.CustParams(l),n=m.pre(l),o=attr(l,e),p=b.keyCode;13==p&&-1!=attrClass(f).indexOf("open")&&(j=f.querySelector("li.active"),null!==j&&(g._args.select(l,j),attrClass(f,"autocomplete"))),38==p||40==p?(j=f.querySelector("li.active"),j?(c=Array.prototype.indexOf.call(j.parentNode.children,j),h=c+(p-39),i=f.getElementsByTagName("li").length,attrClass(j,""),0>h?h=i-1:h>=i&&(h=0),attrClass(j.parentElement.childNodes.item(h),"active")):k&&attrClass(k,"active")):(35>p||p>40)&&n&&m.url&&(o&&n==o||attrClass(f,"autocomplete open"),d=a(d,m,m.paramName+"="+n,l,f))}}})})}else new d(e)};return d.prototype={CustParams:function(a,b){var d="data-autocomplete-id",e=this;if(b)return void delete e._custArgs[attr(a,d)];if(!a.hasAttribute(d)){a.setAttribute(d,e._custArgs.length);var f,g="data-autocomplete",h={limit:g+"-limit",method:g+"-method",noResult:g+"-no-result",paramName:g+"-param-name",url:g},i=Object.getOwnPropertyNames(h);for(f=i.length-1;f>=0;f--)h[i[f]]=attr(a,h[i[f]]);for(f in h)h.hasOwnProperty(f)&&!h[f]&&delete h[f];h.method&&!h.method.match(/^GET|POST$/i)&&delete h.method,h.limit&&(isNaN(h.limit)?delete h.limit:h.limit=parseInt(h.limit)),e._custArgs.push(c(this._args,h))}return e._custArgs[attr(a,d)]}},d}();
//# sourceMappingURL=autocomplete.min.js.map